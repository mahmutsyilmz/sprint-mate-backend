# Application Configuration
spring.application.name=sprint-mate-backend

# Server Configuration
server.port=8080

# =============================================
# Database Configuration
# =============================================
# Using file-based H2 to persist data between restarts
## Data stored in ./data/sprintmate.mv.db
#spring.datasource.url=jdbc:h2:file:./data/sprintmate;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE
#spring.datasource.driverClassName=org.h2.Driver
#spring.datasource.username=sa
#spring.datasource.password=

# --- MSSQL Configuration ---
spring.datasource.url=${DB_URL:jdbc:sqlserver://localhost:1433;databaseName=SprintMate;encrypt=true;trustServerCertificate=true;}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA Configuration
# update: Only creates/alters tables, never drops (preserves data)
# validate: Only validates schema, no changes (for production)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect

# SQL Initialization
spring.sql.init.mode=always

## H2 Console (development only)
#spring.h2.console.enabled=true
#spring.h2.console.path=/h2-console

groq.api-key=${GROQ_API_KEY}
groq.base-url=https://api.groq.com/openai/v1/chat/completions

# =============================================
# Clarifai AI Configuration (Primary)
# =============================================
# Uses GPT-4 hosted on Clarifai for robust JSON generation
clarifai.api-key=${CLARIFAI_API_KEY}
clarifai.base-url=https://api.clarifai.com/v2

# =============================================
# Gemini AI Configuration (Fallback/Legacy)
# =============================================
# gemini.api-key=${GEMINI_API_KEY}
# gemini.model=gemini-1.5-flash
# gemini.endpoint=https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent

# =============================================
# GitHub OAuth2 Configuration
# =============================================
# Best Practice: Use environment variables for sensitive data
# Set these in your environment before running:
#   Windows: set GITHUB_CLIENT_ID=your-id
#   Linux/Mac: export GITHUB_CLIENT_ID=your-id
#
# To obtain credentials:
# 1. Go to GitHub > Settings > Developer settings > OAuth Apps
# 2. Create a new OAuth App
# 3. Set Homepage URL to: http://localhost:8080
# 4. Set Authorization callback URL to: http://localhost:8080/login/oauth2/code/github
# 5. Set environment variables with Client ID and Client Secret
# =============================================
spring.security.oauth2.client.registration.github.client-id=${GITHUB_CLIENT_ID}
spring.security.oauth2.client.registration.github.client-secret=${GITHUB_CLIENT_SECRET}

# =============================================
# Application Configuration
# =============================================
app.frontend-url=http://localhost:5173

# Flyway - Disabled in dev (using ddl-auto=update)
spring.flyway.enabled=false
